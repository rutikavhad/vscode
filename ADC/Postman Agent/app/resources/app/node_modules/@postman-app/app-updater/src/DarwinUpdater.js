const AbstractUpdater = require('./AbstractUpdater');

class DarwinUpdater extends AbstractUpdater {
  constructor(updaterOptions) {
    super(updaterOptions);
  }

  /**
   * @method getFeedUrl
   * @param {Object} updateInfo
   */
  getFeedUrl(updateInfo) {
    if (typeof updateInfo?.platform !== 'string') {
      throw new Error('An invalid platform was provided.');
    }

    var argsArray = [
      `currentVersion=${updateInfo.version}`,
      `platform=${updateInfo.platform}`,
      `channel=${updateInfo.channel}`,
      updateInfo.additionalParamsString,
    ];
    return `${updateInfo.updateServerDomain}update/status?${argsArray.join(
      '&'
    )}`;
  }
}

module.exports = DarwinUpdater;
