# @postman/runtime.models

Work with Postman Collections, requests, variables, and other core Postman models.

## Example

```ts
import { Collection, type HTTPRequest } from '@postman/runtime.models';
import json from './collection.json' with { type: 'json' };

const collection = Collection.parse(json);

const request: HTTPRequest = {
  type: 'http-request',
  payload: { url: 'https://postman-echo.com/get', method: 'GET' },
};
collection.children.push(request);
```

## API

Each model has utilities for parsing and validating that they match Postman's schema. They also implement [Standard Schema](https://github.com/standard-schema/standard-schema) to support integrating with other libraries.

```ts
interface Model<Type> {
  parse(input: unknown): Type;
  is(value: unknown): value is Type;
  validate(value: unknown): { value: Type } | { issues: Issue[] };
  '~standard': StandardSchemaV1<unknown, Type>;
}
```

Available items:

- `Collection`
- `Folder`
- `HTTPRequest`
- `HTTPExample`
- `GraphQLRequest`
- `GraphQLExample`
- `GRPCRequest`
- `GRPCExample`
- `WebSocketRequest`
- `WebSocketExample`
- `WebSocketMessage`
- `SocketIORequest`
- `SocketIOExample`
- `SocketIOMessage`
- `MQTTRequest`
- `MQTTExample`
- `MQTTMessage`
- `LLMRequest`
- `MCPRequest`

Extensions:

- `Auth`
- `Documentation`
- `Events`
- `Schema`

Common:

- `KeyValues` and variations

Additionally, there are convenience methods for items and extensions:

- `items`: array of all items
- `itemByType`: object mapping item type to item
- `extensions`: array of all extensions
- `extensionsByType`: object mapping extensions type to extension

## `resource`

Item types also expose a `resource` property that can be used to test items as resources, where `id` is required and `children` are represented as links with `type` and `id`.

```ts
import { Collection } from '@postman/runtime.models';

Collection.resource.validate({
  type: 'collection',
  id: '...',
  payload: { variables: [] },
  extensions: { documentation: { content: '...' } },
  children: [
    { type: 'http-request', id: '...' },
    { type: 'graphql-request', id: '...' },
    { type: 'grpc-request', id: '...' },
  ],
});
```

## JSON Schema

JSON schemas are also available for each type:

```ts
import http from '@postman/runtime.models/schemas/http-request.json' with { type: 'json' };

// Validate with ajv or other tools
```

## Constraints

### `Auth`

```ts
import { Auth } from '@postman/runtime.models';

Auth.constraints({
  supportsAuthTypes: ['basic'],
});
```

### `Events`

```ts
import { Events } from '@postman/runtime.models';

Events.constrains({
  supportedListeners: ['beforeRequest', 'afterResponse'],
});
```
