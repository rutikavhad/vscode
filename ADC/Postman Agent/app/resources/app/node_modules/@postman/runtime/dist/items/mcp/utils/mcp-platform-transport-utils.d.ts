import { Client } from '@modelcontextprotocol/sdk/client/index.js';
import { SSEClientTransport } from '@modelcontextprotocol/sdk/client/sse.js';
import { StdioClientTransport } from '@modelcontextprotocol/sdk/client/stdio.js';
import { StreamableHTTPClientTransport } from '@modelcontextprotocol/sdk/client/streamableHttp.js';
import type { RequestHandlerExtra } from '@modelcontextprotocol/sdk/shared/protocol.js';
import { CreateMessageResult, ElicitResult, type CreateMessageRequest, type ElicitRequest, type Notification } from '@modelcontextprotocol/sdk/types.js';
import { PromiseWithResolvers } from '../../../lib/promises';
import { MCPEvent } from '../mcp-event/mcp-event';
import { MCPConnectRequestHTTP, MCPConnectRequestSTDIO } from '../mcp-event/types';
export declare function createClient(callbacks?: ((client: Client) => void)[]): Client<{
    method: string;
    params?: {
        [x: string]: unknown;
        _meta?: {
            [x: string]: unknown;
            progressToken?: string | number | undefined;
        } | undefined;
    } | undefined;
}, {
    method: string;
    params?: {
        [x: string]: unknown;
        _meta?: {
            [x: string]: unknown;
        } | undefined;
    } | undefined;
}, {
    [x: string]: unknown;
    _meta?: {
        [x: string]: unknown;
    } | undefined;
}>;
export declare function generateStdioTransport(request: MCPConnectRequestSTDIO): StdioClientTransport;
export declare function generateHTTPTransport(request: MCPConnectRequestHTTP, transport: 'http', incoming: ReadableStreamDefaultController<MCPEvent.IncomingPlatformEvent>): StreamableHTTPClientTransport;
export declare function generateHTTPTransport(request: MCPConnectRequestHTTP, transport: 'sse', incoming: ReadableStreamDefaultController<MCPEvent.IncomingPlatformEvent>): SSEClientTransport;
export declare const NOTIFICATION_SCHEMAS: (import("zod").ZodObject<{} & {
    method: import("zod").ZodLiteral<"notifications/cancelled">;
    params: import("zod").ZodObject<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        requestId: import("zod").ZodUnion<[import("zod").ZodString, import("zod").ZodNumber]>;
        reason: import("zod").ZodOptional<import("zod").ZodString>;
    }>, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        requestId: import("zod").ZodUnion<[import("zod").ZodString, import("zod").ZodNumber]>;
        reason: import("zod").ZodOptional<import("zod").ZodString>;
    }>, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        requestId: import("zod").ZodUnion<[import("zod").ZodString, import("zod").ZodNumber]>;
        reason: import("zod").ZodOptional<import("zod").ZodString>;
    }>, import("zod").ZodTypeAny, "passthrough">>;
}, "strip", import("zod").ZodTypeAny, {
    params: {
        requestId: string | number;
        _meta?: import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough"> | undefined;
        reason?: string | undefined;
    } & {
        [k: string]: unknown;
    };
    method: "notifications/cancelled";
}, {
    params: {
        requestId: string | number;
        _meta?: import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough"> | undefined;
        reason?: string | undefined;
    } & {
        [k: string]: unknown;
    };
    method: "notifications/cancelled";
}> | import("zod").ZodObject<{} & {
    method: import("zod").ZodLiteral<"notifications/message">;
    params: import("zod").ZodObject<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        level: import("zod").ZodEnum<["debug", "info", "notice", "warning", "error", "critical", "alert", "emergency"]>;
        logger: import("zod").ZodOptional<import("zod").ZodString>;
        data: import("zod").ZodUnknown;
    }>, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        level: import("zod").ZodEnum<["debug", "info", "notice", "warning", "error", "critical", "alert", "emergency"]>;
        logger: import("zod").ZodOptional<import("zod").ZodString>;
        data: import("zod").ZodUnknown;
    }>, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        level: import("zod").ZodEnum<["debug", "info", "notice", "warning", "error", "critical", "alert", "emergency"]>;
        logger: import("zod").ZodOptional<import("zod").ZodString>;
        data: import("zod").ZodUnknown;
    }>, import("zod").ZodTypeAny, "passthrough">>;
}, "strip", import("zod").ZodTypeAny, {
    params: {
        level: "error" | "debug" | "info" | "notice" | "warning" | "critical" | "alert" | "emergency";
        _meta?: import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough"> | undefined;
        data?: unknown;
        logger?: string | undefined;
    } & {
        [k: string]: unknown;
    };
    method: "notifications/message";
}, {
    params: {
        level: "error" | "debug" | "info" | "notice" | "warning" | "critical" | "alert" | "emergency";
        _meta?: import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough"> | undefined;
        data?: unknown;
        logger?: string | undefined;
    } & {
        [k: string]: unknown;
    };
    method: "notifications/message";
}> | import("zod").ZodObject<{} & {
    method: import("zod").ZodLiteral<"notifications/resources/updated">;
    params: import("zod").ZodObject<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        uri: import("zod").ZodString;
    }>, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        uri: import("zod").ZodString;
    }>, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<import("zod").objectUtil.extendShape<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, {
        uri: import("zod").ZodString;
    }>, import("zod").ZodTypeAny, "passthrough">>;
}, "strip", import("zod").ZodTypeAny, {
    params: {
        uri: string;
        _meta?: import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough"> | undefined;
    } & {
        [k: string]: unknown;
    };
    method: "notifications/resources/updated";
}, {
    params: {
        uri: string;
        _meta?: import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough"> | undefined;
    } & {
        [k: string]: unknown;
    };
    method: "notifications/resources/updated";
}> | import("zod").ZodObject<{
    params: import("zod").ZodOptional<import("zod").ZodObject<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough">>>;
} & {
    method: import("zod").ZodLiteral<"notifications/resources/list_changed">;
}, "strip", import("zod").ZodTypeAny, {
    method: "notifications/resources/list_changed";
    params?: import("zod").objectOutputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough"> | undefined;
}, {
    method: "notifications/resources/list_changed";
    params?: import("zod").objectInputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough"> | undefined;
}> | import("zod").ZodObject<{
    params: import("zod").ZodOptional<import("zod").ZodObject<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough">>>;
} & {
    method: import("zod").ZodLiteral<"notifications/tools/list_changed">;
}, "strip", import("zod").ZodTypeAny, {
    method: "notifications/tools/list_changed";
    params?: import("zod").objectOutputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough"> | undefined;
}, {
    method: "notifications/tools/list_changed";
    params?: import("zod").objectInputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough"> | undefined;
}> | import("zod").ZodObject<{
    params: import("zod").ZodOptional<import("zod").ZodObject<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough">>>;
} & {
    method: import("zod").ZodLiteral<"notifications/prompts/list_changed">;
}, "strip", import("zod").ZodTypeAny, {
    method: "notifications/prompts/list_changed";
    params?: import("zod").objectOutputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough"> | undefined;
}, {
    method: "notifications/prompts/list_changed";
    params?: import("zod").objectInputType<{
        _meta: import("zod").ZodOptional<import("zod").ZodObject<{}, "passthrough", import("zod").ZodTypeAny, import("zod").objectOutputType<{}, import("zod").ZodTypeAny, "passthrough">, import("zod").objectInputType<{}, import("zod").ZodTypeAny, "passthrough">>>;
    }, import("zod").ZodTypeAny, "passthrough"> | undefined;
}>)[];
export declare function updateNotificationHandlers(schemas: typeof NOTIFICATION_SCHEMAS, handler: (notification: Notification) => void | Promise<void>): (client: Client) => void;
/**
 * Creates a generic request handler for server-initiated requests (elicitation, sampling, etc.)
 * @param pendingRequests - Map to store pending promises
 * @param incoming - Readable stream controller to enqueue events
 * @param eventType - Type of the event to enqueue
 * @param schema - Zod schema for validation
 * @returns Handler function for the request
 */
export declare function createServerRequestHandler<TRequest extends ElicitRequest | CreateMessageRequest, TResult extends ElicitResult | CreateMessageResult>(pendingRequests: Map<string, PromiseWithResolvers<TResult>>, incoming: ReadableStreamDefaultController<MCPEvent.IncomingPlatformEvent>, eventType: MCPEvent.ServerRequest['type'], schema: MCPEvent.ServerRequest['schema']): (request: TRequest, extra: RequestHandlerExtra<TRequest, Notification>) => Promise<TResult>;
