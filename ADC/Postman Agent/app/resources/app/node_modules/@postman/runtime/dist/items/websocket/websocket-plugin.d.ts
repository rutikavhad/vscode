import { KeyValues } from '@postman/runtime.models';
import { RunEvent } from '../../events';
import type { Channel, Platform } from '../../lib/rpc';
import { Plugin } from '../../plugin';
export interface WebSocketConnectionOptions {
    protocols: string[];
    headers?: KeyValues;
    handshakeTimeout?: number;
    maxPayload?: number;
    followRedirects?: boolean;
    retryCount?: number;
    retryDelay?: number;
    rejectUnauthorized?: boolean;
    cert?: Uint8Array;
    key?: Uint8Array;
    pfx?: Uint8Array;
    passphrase?: string;
    ca?: Uint8Array | null;
}
export interface WebSocketPlatform extends Platform {
    connect: (url: string, options: WebSocketConnectionOptions) => Promise<Channel<WebSocketPlatformIncomingEvent, WebSocketPlatformOutgoingEvent>>;
}
export type WebSocketPlatformIncomingEvent = {
    type: 'open';
    payload: {
        request?: {
            method: string;
            url: string;
            headers: KeyValues;
        };
        response?: {
            statusCode: number;
            statusText: string;
            headers: KeyValues;
        };
    };
} | {
    type: 'reconnect';
    payload: {
        attempt: number;
        timeout: number;
    };
} | {
    type: 'message';
    payload: string | Uint8Array;
} | {
    type: 'end';
    payload: {
        code?: number;
        reason?: string;
        aborted: boolean;
    };
} | {
    type: 'error';
    payload: {
        error: {
            message: string;
        };
        request?: {
            method: string;
            url: string;
            headers: KeyValues;
        };
        response?: {
            statusCode: number;
            statusText: string;
            headers: KeyValues;
        };
    };
};
export type WebSocketPlatformOutgoingEvent = {
    type: 'send';
    payload: string | Uint8Array;
} | {
    type: 'close';
    payload: {
        code?: number;
        reason?: string;
    };
} | RunEvent.Cancel;
export declare function websocket(options: {
    platform?: WebSocketPlatform;
}): Plugin;
