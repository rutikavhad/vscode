"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.toReplaced = toReplaced;
const promises_1 = require("./promises");
function toReplaced(input, pattern, replacer) {
    const replacing = [];
    input.replace(pattern, (substring, ...args) => {
        replacing.push(replacer(substring, ...args));
        return substring;
    });
    const replace = (replacements) => input.replace(pattern, () => replacements.shift());
    if (isSyncReplacement(replacing)) {
        return replace(replacing);
    }
    return Promise.all(replacing).then(replace);
}
function isSyncReplacement(replacing) {
    return !replacing.some(promises_1.isPromise);
}
//# sourceMappingURL=strings.js.map